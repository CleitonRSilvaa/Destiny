<!DOCTYPE html>

<html lang="pt-BR" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Destiny</title>
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="icon" href="../img/LogoDestiny.svg">
  <link rel="stylesheet" href="../css/stylesLanding.css">
</head>

<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand p-2" href="/">
      <img src="../img/LogoDestiny.svg" width="80" height="100%" class="d-inline-block align-top" alt="Logo">
    </a>
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link " href="#">Produtos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Experiences</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Sobre n√≥s</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact</a>
          </li>
          <li class="nav-item">
          </li>
        </ul>
      </div>

      <!-- <div sec:authorize="isAuthenticated()">
        <spam class='text-white px-2' th:text="${#authentication.name}"></spam>
      </div> -->

      <div class="text-end">
        <a type="button" class="btnlogin btn btn-outline-light me-2" href="/login">Login</a>
      </div>
    </div>
  </nav>

  <section id="carousel" class="mt-5 mb-5">
    <div class="owl-carousel owl-theme">
      <div class="item"><img src="/img/UniqueExperience.png" alt="Advertisement 1"></div>
      <div class="item"><img src="/img/TimeToDestiny.png" alt="Advertisement 2"></div>
      <div class="item"><img src="/img/TripTime.png" alt="Advertisement 3"></div>
      <div class="item"><img src="/img/LuxurySPA.png" alt="Advertisement 3"></div>

    </div>
  </section>

  <!-- Product Listing -->
  <section class="product-listing mt-5 mb-5 justify-content-center">
    <div class="row justify-content-center">
      <th:block th:each="produto : ${produtoPage}">
        <div class="col-md-3 m-3">
          <div class="card h-100 ">
            <th:block th:each="imagem, iterStat : ${produto.imagens}">
              <img th:if="${imagem.principal}" th:src="${'/'+imagem.caminho}" class="card-img-top card-img-custom" alt="...">
            </th:block>

            <div class="card-body">
              <div class="star-rating" th:attr="data-rating=${produto.avaliacao}">
                <span th:each=" star : ${#numbers.sequence(1,5)}" th:switch="${star}">
                  <i th:case="*{produto.avaliacao >= star}" class="fas fa-star"></i>
                  <i th:case="*{produto.avaliacao == star - 0.5}" class="fas fa-star-half-alt"></i>
                  <i th:case="*{produto.avaliacao < star}" class="far fa-star"></i>
                </span>
              </div>
              <div class="justify-content-center">

                <h4 class="card-title text-center" th:text="${produto.nome}"></h4>
                <p class="card-text text-center" th:text="${'R$ '+ produto.valor}"></p>
                <div class="text-center mt-auto">
                  <a th:href="@{'/produto/informacao?id=' + ${produto.id}}" class=" btnCompra btn btn-primary center mt-auto" style="max-width: 58 48;">Saiba Mais</a>
                  <a href="#" class=" btnCompra btn btn-light justify-content-center"><i class="fa-solid fa-cart-shopping"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </th:block>
    </div>
  </section>


  <div class="cart-circle">
    <a class="nav-link" href="#">
      <span class="badge badge-pill bg-danger text-white">1</span>
      <span><i class="fas fa-shopping-cart text-white"></i></span>
    </a>
  </div>

  <footer class="footer mt-auto py-3 bg-dark ">
    <div class="container text-center">
      <span class="text-white">&copy; 2023 Destiny. Todos os direitos reservados</span>
    </div>
  </footer>

  <script src="https://kit.fontawesome.com/9ef98eb577.js" crossorigin="anonymous"></script>
  <script src="../jquery/jquery.min.js"></script>
  <script src="../jquery/jquery.mask.min.js"></script>
  <script src="../js/bootstrap.bundle.min.js"></script>
  <script src="../js/popper.min.js"></script>



  <!-- Owl Carousel JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>


  <!-- Initialize Owl Carousel -->
  <script>
    $(document).ready(function () {
      $('.owl-carousel').owlCarousel({
        loop: true,
        margin: 10,
        responsiveClass: true,
        autoplay: true, // this allows the items to rotate automatically
        autoplayTimeout: 3000, // this is the time delay between transitions in milliseconds (i.e., 3 seconds)
        responsive: {
          0: {
            items: 1,
            nav: true
          },
          600: {
            items: 1,  // changed this to show only one image
            nav: false
          },
          1000: {
            items: 1,  // changed this to show only one image
            nav: true,
            loop: true
          }
        }
      });
    });


    function renderStarRatings() {
      $('.star-rating').each(function () {
        const rating = parseFloat($(this).data('rating'));
        $(this).empty(); // clear previous stars

        for (let i = 1; i <= 5; i++) {
          if (i <= rating) {
            $(this).append('<i class="fas fa-star"></i>');
          } else if (i - rating === 0.5) {
            $(this).append('<i class="fas fa-star-half-alt"></i>');
          } else {
            $(this).append('<i class="far fa-star"></i>');
          }
        }
      });
    }

    $(document).ready(function () {
      renderStarRatings();
    });



  </script>

</body>

</html>